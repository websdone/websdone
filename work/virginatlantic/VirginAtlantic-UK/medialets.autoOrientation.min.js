/**
 * @class medialets.autoOrientation
 * @version 2
 * @documentation http://support.medialets.com/display/CREATING/Javascript+Libraries+and+Plugins
 */
medialets.autoOrientation=function(h){this.o={$target:null,format:"expandable",orientation:"portrait",delay:0,ignoreFirst:false,viewport:null,viewportPattern:"width=#W,height=#H,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"};var e,f=null,c=null,g=null;this.init=function(b){$m.deepCopy(b,this.o);this.o.$target=$m(this.o.$target);if(this.o.viewport!==null&&typeof this.o.viewport==="object")e=$m.find("meta[name=viewport]")[0];setTimeout(this.trackOrientation.delegate(this),200);return this};this.trackOrientation=function(){if(c===null){if(this.o.delay>0)try{MMBridge.Orientation.init(this.setOrientationWithDelay.delegate(this))}catch(b){}else try{MMBridge.Orientation.init(this.setOrientation.delegate(this))}catch(d){}setTimeout(this.trackOrientation.delegate(this),200)}};this.setOrientationWithDelay=function(b){try{clearTimeout(f)}catch(d){}f=setTimeout(function(){this.setOrientation(b)}.delegate(this),this.o.delay)};this.setOrientation=function(b){b=parseInt(b,10);var d,a="";if(g!==b){g=b;if(c===null){c=b;if(this.o.ignoreFirst)return}if(this.o.orientation==="portrait")if(c===360||c===180)if(this.o.format==="expandable")switch(b){case 0:a="portrait";break;case -90:a="landscape-right";break;case 90:a="landscape-left";break;case 180:a="portrait";break;case 360:a="portrait-180";break;default:a="portrait"}else{if(this.o.format==="interstitial")switch(b){case 0:a="portrait";break;case -90:a="landscape-left";break;case 90:a="landscape-right";break;case 180:a="portrait-180";break;case 360:a="portrait";break;default:a="portrait"}}else switch(b){case 0:a="portrait";break;case -90:a="landscape-left";break;case 90:a="landscape-right";break;case 180:a="portrait-180";break;case 360:a="portrait-180";break;default:a="portrait"}else if(this.o.orientation==="landscape")if(c===-90||c===360)switch(b){case 0:a="portrait";break;case -90:a="landscape-right";break;case 90:a="landscape-left";break;case 180:a="portrait-180";break;default:a="portrait"}else switch(b){case 0:a="portrait-180";break;case -90:a="landscape-left";break;case 90:a="landscape-right";break;case 180:a="portrait";break;default:a="portrait"}if(this.o.$target===null)d=document;else{d=this.o.$target;d.className=a}if(e&&e.nodeType)if(b==="portrait"||b==="portrait-180")e.content=this.o.viewportPattern.replace(/#H/gi,this.o.portrait.h).replace(/#W/gi,this.o.portrait.w);else if(b==="landscape-left"||b==="landscape-right")e.content=this.o.viewportPattern.replace(/#H/gi,this.o.landscape.h).replace(/#W/gi,this.o.landscape.w);$m.trigger(d,"m.orientationChange",{orientation:a})}};this.init(h)};